<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ç§‘éš†å³¶ç†±å¸¶å†’éšª App</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Noto Sans TC', 'sans-serif'],
                    },
                    colors: {
                        ocean: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                        sand: '#fdfbf7',
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'wave': 'wave 25s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        wave: {
                            '0%': { transform: 'translateX(0)' },
                            '100%': { transform: 'translateX(-50%)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #0ea5e9;
            color: #0f172a;
            -webkit-tap-highlight-color: transparent;
            overflow: hidden; /* App-like: no body scroll */
        }
        
        .glass-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(12px);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }
        
        .glass-card-dark {
             background: rgba(15, 23, 42, 0.6);
             backdrop-filter: blur(12px);
             color: white;
        }

        /* Hide Scrollbar but keep functionality */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .wave-bg {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 50vh;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23ffffff' fill-opacity='0.15' d='M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,250.7C672,235,768,181,864,181.3C960,181,1056,235,1152,234.7C1248,235,1344,181,1392,154.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: repeat-x;
            background-size: 50% 100%;
            z-index: -1;
        }

        /* Swipe Snap */
        .snap-container {
            scroll-snap-type: x mandatory;
        }
        .snap-item {
            scroll-snap-align: center;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { MapPin, Clock, CloudSun, Calendar, Edit2, Plus, Trash2, ArrowUp, ArrowDown, X, Navigation, Coffee, Utensils, Waves, Camera, BedDouble, Plane, Music, Anchor } = lucide;

        // --- åˆå§‹è³‡æ–™ (æ ¹æ“šæ‚¨çš„ PDF) ---
        const initialData = [
            {
                id: 'day1',
                date: '10/3',
                weekday: 'é€±äº”',
                title: 'æŠµé”èˆ‡å¸‚å€æ¢ç´¢',
                weather: 'æ™´ 29Â°C',
                activities: [
                    { id: 101, time: '08:30', title: 'æŠµé” USU æ©Ÿå ´', type: 'transport', note: 'ç’°å¢ƒç¨…200Pï¼Œæ¥é€500P', location: 'Francisco B. Reyes Airport' },
                    { id: 102, time: '09:30', title: 'é£¯åº— Check-in', type: 'hotel', note: 'MO2 Westown Lagoon', location: 'MO2 Westown Lagoon' },
                    { id: 103, time: '10:00', title: 'Deyo Cafe æ—©åˆé¤', type: 'food', note: 'æ”¾é¬†äº«ç”¨ç¬¬ä¸€é¤', location: 'Deyo Cafe Coron' },
                    { id: 104, time: '12:00', title: 'Booms Eatery', type: 'food', note: 'åˆé¤ï¼šå¿…åƒçƒ¤è±¬æ’', location: 'Booms Eatery' },
                    { id: 105, time: '13:00', title: 'Mathew\'s Crepe', type: 'food', note: 'ç”œé»æ™‚é–“', location: 'Mathew\'s island Crepe' },
                    { id: 106, time: '16:30', title: 'åå­—æ¶å±±å¤•é™½', type: 'view', note: 'çˆ¬700éšçœ‹å…¨æ™¯', location: 'Mt. Tapyas' },
                    { id: 107, time: '18:30', title: 'Maquinit æµ·æ°´æº«æ³‰', type: 'relax', note: 'é–€ç¥¨300Pï¼Œå˜Ÿå˜Ÿè»Š500P', location: 'Maquinit Hot Spring' },
                    { id: 108, time: '20:00', title: 'Gavin\'s Kitchen', type: 'food', note: 'æ™šé¤ï¼šRibs, æµ·é®®æ‹¼ç›¤', location: 'Gavin\'s Kitchen + Bar' },
                    { id: 109, time: '22:00', title: 'Kalipay Spa', type: 'relax', note: 'æŒ‰æ‘©æ”¾é¬†', location: 'Kalipay Spa Coron' },
                ]
            },
            {
                id: 'day2',
                date: '10/4',
                weekday: 'é€±å…­',
                title: 'ç¶“å…¸è·³å³¶ A',
                weather: 'çƒˆæ—¥ 31Â°C',
                activities: [
                    { id: 201, time: '08:00', title: 'å‡ºæµ·æ¥é€', type: 'boat', note: 'æº–å‚™å‡ºç™¼ï¼æ¯äººç´„2600P', location: 'Coron Port' },
                    { id: 202, time: '09:00', title: 'Kayangan Lake', type: 'view', note: 'åœ‹æ¹–ï¼Œå¿…æ‹æ™¯é»', location: 'Kayangan Lake' },
                    { id: 203, time: '10:30', title: 'Twin Lagoon', type: 'water', note: 'é›™å­æ¹– å†·ç†±äº¤æ›¿æ°´åŸŸ', location: 'Twin Lagoon' },
                    { id: 204, time: '12:30', title: 'è·³å³¶åˆé¤', type: 'food', note: 'æ²™ç˜ BBQ', location: '' },
                    { id: 205, time: '14:00', title: 'Siete Pecados', type: 'water', note: 'ä¸ƒå­ç¤å²©æµ®æ½›', location: 'Siete Pecados' },
                    { id: 206, time: '19:00', title: 'El Kuvo', type: 'food', note: 'æ™šé¤ï¼šè²å¼æ–™ç†', location: 'El Kuvo' },
                    { id: 207, time: '22:00', title: 'Bam Bar', type: 'activity', note: 'Live Band ç¾å ´æ¼”å¥', location: 'Bam Bar' },
                ]
            },
            {
                id: 'day3',
                date: '10/5',
                weekday: 'é€±æ—¥',
                title: 'é ç¨‹è·³å³¶ B',
                weather: 'æ™´æ™‚å¤šé›² 30Â°C',
                activities: [
                    { id: 301, time: '08:00', title: 'å‡ºæµ·æ¥é€', type: 'boat', note: 'è¼ƒé èˆ¹ç¨‹ï¼Œæ¯äººç´„2950P', location: 'Coron Port' },
                    { id: 302, time: '10:00', title: 'Malcapuya Island', type: 'view', note: 'ç´”ç™½æ²™ç˜ï¼Œçµ•ç¾æµ·æ™¯', location: 'Malcapuya Island' },
                    { id: 303, time: '12:00', title: 'Banana Island', type: 'view', note: 'åˆé¤èˆ‡ä¼‘æ†©', location: 'Banana Island' },
                    { id: 304, time: '14:00', title: 'Waling Waling', type: 'water', note: 'è‘—åçš„æ²™æ´²', location: 'Waling Waling Island' },
                    { id: 305, time: '19:00', title: 'Umamikusina', type: 'food', note: 'æ™šé¤ï¼šPork Sisig, Curry Fish', location: 'Umamikusina' },
                    { id: 306, time: '21:00', title: 'Kalipay Spa', type: 'relax', note: 'å†æ¬¡æŒ‰æ‘©', location: 'Kalipay Spa Coron' },
                ]
            },
            {
                id: 'day4',
                date: '10/6',
                weekday: 'é€±ä¸€',
                title: 'æ”¾é¬†èˆ‡è¿”ç¨‹',
                weather: 'æ™´ 29Â°C',
                activities: [
                    { id: 401, time: '09:00', title: 'é£¯åº—ç©æ°´', type: 'relax', note: 'äº«å—æœ€å¾Œæ³³æ± æ™‚å…‰', location: 'MO2 Westown Lagoon' },
                    { id: 402, time: '10:30', title: 'å°„æ“Šå ´æ´»å‹•', type: 'activity', note: 'é«”é©—å¯¦å½ˆå°„æ“Š (è¦–æƒ…æ³)', location: 'Coron Shooting Range' },
                    { id: 403, time: '12:00', title: 'Poco Deli', type: 'food', note: 'åˆé¤ï¼šPizza, Pasta (å‹¿é»æµ·é®®Pizza)', location: 'Poco Deli Coron' },
                    { id: 404, time: '15:00', title: 'å‰å¾€æ©Ÿå ´', type: 'transport', note: 'å†è¦‹ç§‘éš†ï¼', location: 'Francisco B. Reyes Airport' },
                    { id: 405, time: '18:30', title: 'è½‰æ©Ÿæ™šé¤', type: 'food', note: 'Las Flores (é¦¬å°¼æ‹‰æ©Ÿå ´)', location: 'Las Flores Manila' },
                    { id: 406, time: '22:40', title: 'æ­æ©Ÿè¿”å°', type: 'transport', note: 'CebuAir 5J310', location: 'Ninoy Aquino International Airport' },
                ]
            }
        ];

        // --- Icon Mapping ---
        const getIcon = (type) => {
            switch(type) {
                case 'food': return <Utensils size={18} />;
                case 'view': return <Camera size={18} />;
                case 'water': return <Waves size={18} />;
                case 'hotel': return <BedDouble size={18} />;
                case 'transport': return <Plane size={18} />;
                case 'boat': return <Anchor size={18} />;
                case 'activity': return <Music size={18} />;
                case 'relax': return <Coffee size={18} />;
                default: return <MapPin size={18} />;
            }
        };

        const getTypeColor = (type) => {
             switch(type) {
                case 'food': return 'bg-orange-100 text-orange-600';
                case 'view': return 'bg-emerald-100 text-emerald-600';
                case 'water': return 'bg-cyan-100 text-cyan-600';
                case 'hotel': return 'bg-violet-100 text-violet-600';
                case 'transport': return 'bg-slate-200 text-slate-600';
                case 'boat': return 'bg-blue-100 text-blue-600';
                case 'relax': return 'bg-rose-100 text-rose-600';
                default: return 'bg-gray-100 text-gray-600';
            }
        };

        // --- Components ---

        const Modal = ({ isOpen, onClose, children }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
                    <div className="absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity" onClick={onClose}></div>
                    <div className="relative w-full max-w-sm bg-white rounded-3xl shadow-2xl overflow-hidden animate-float-up">
                        {children}
                    </div>
                </div>
            );
        };

        const App = () => {
            const [schedule, setSchedule] = useState(initialData);
            const [activeDayIdx, setActiveDayIdx] = useState(0);
            const [currentTime, setCurrentTime] = useState(new Date());
            const [editMode, setEditMode] = useState(false);
            const [editingItem, setEditingItem] = useState(null); // { dayIdx, actIdx, data }
            const scrollRef = useRef(null);

            // Load & Save
            useEffect(() => {
                const saved = localStorage.getItem('coronApp_v2');
                if (saved) setSchedule(JSON.parse(saved));
            }, []);
            useEffect(() => {
                localStorage.setItem('coronApp_v2', JSON.stringify(schedule));
            }, [schedule]);

            // Clock
            useEffect(() => {
                const timer = setInterval(() => setCurrentTime(new Date()), 10000);
                return () => clearInterval(timer);
            }, []);

            // Scroll Handler
            const scrollToDay = (idx) => {
                setActiveDayIdx(idx);
                setEditMode(false); // Switch day turns off edit mode
                if (scrollRef.current) {
                    const width = scrollRef.current.offsetWidth;
                    scrollRef.current.scrollTo({ left: width * idx, behavior: 'smooth' });
                }
            };
            
            // Handle horizontal scroll snap detection
            const handleScroll = (e) => {
                 const width = e.target.offsetWidth;
                 const scrollLeft = e.target.scrollLeft;
                 const idx = Math.round(scrollLeft / width);
                 if (idx !== activeDayIdx && idx >= 0 && idx < schedule.length) {
                     setActiveDayIdx(idx);
                     setEditMode(false);
                 }
            };

            // Actions
            const deleteItem = (dayIdx, actIdx) => {
                if(!confirm("ç¢ºå®šåˆªé™¤æ­¤è¡Œç¨‹ï¼Ÿ")) return;
                const newSchedule = [...schedule];
                newSchedule[dayIdx].activities.splice(actIdx, 1);
                setSchedule(newSchedule);
            };

            const moveItem = (dayIdx, actIdx, direction) => {
                const newSchedule = [...schedule];
                const list = newSchedule[dayIdx].activities;
                if (direction === -1 && actIdx > 0) {
                    [list[actIdx], list[actIdx-1]] = [list[actIdx-1], list[actIdx]];
                } else if (direction === 1 && actIdx < list.length - 1) {
                    [list[actIdx], list[actIdx+1]] = [list[actIdx+1], list[actIdx]];
                }
                setSchedule(newSchedule);
            };

            const openGoogleMap = (location) => {
                if (!location) return;
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location + ' Coron Palawan')}`, '_blank');
            };

            const saveItemEdit = (newItem) => {
                const newSchedule = [...schedule];
                if (editingItem.actIdx === -1) {
                    // Add new
                    newSchedule[activeDayIdx].activities.push(newItem);
                    newSchedule[activeDayIdx].activities.sort((a,b) => a.time.localeCompare(b.time));
                } else {
                    // Update
                    newSchedule[activeDayIdx].activities[editingItem.actIdx] = newItem;
                }
                setSchedule(newSchedule);
                setEditingItem(null);
            };

            return (
                <div className="relative h-screen flex flex-col font-sans text-slate-800">
                    
                    {/* Background Animation */}
                    <div className="fixed inset-0 bg-gradient-to-b from-ocean-400 to-ocean-600 -z-20"></div>
                    <div className="wave-bg animate-wave"></div>

                    {/* Top Bar (Glass) */}
                    <header className="glass-header pt-12 pb-2 px-5 text-white flex justify-between items-end z-10 shrink-0">
                        <div>
                            <div className="flex items-center gap-2 opacity-90 mb-1">
                                <Calendar size={14} />
                                <span className="text-xs tracking-wider font-medium uppercase">Travel Itinerary</span>
                            </div>
                            <h1 className="text-2xl font-bold tracking-tight">ç§‘éš†å†’éšª</h1>
                        </div>
                        <div className="text-right">
                            <div className="text-2xl font-light font-mono leading-none">
                                {currentTime.toLocaleTimeString('zh-TW', {hour:'2-digit', minute:'2-digit', hour12: false})}
                            </div>
                            <div className="text-xs text-ocean-100 mt-1 flex items-center justify-end gap-1">
                                <CloudSun size={12} />
                                {schedule[activeDayIdx].weather}
                            </div>
                        </div>
                    </header>

                    {/* Date Tabs */}
                    <div className="bg-ocean-600/30 backdrop-blur-sm pt-2 pb-2 px-2 flex gap-2 overflow-x-auto no-scrollbar shrink-0 z-10">
                        {schedule.map((day, idx) => (
                            <button
                                key={day.id}
                                onClick={() => scrollToDay(idx)}
                                className={`flex-1 min-w-[80px] py-2 rounded-xl transition-all duration-300 flex flex-col items-center ${
                                    idx === activeDayIdx 
                                    ? 'bg-white text-ocean-600 shadow-lg scale-100 opacity-100' 
                                    : 'bg-white/10 text-white scale-95 opacity-70 hover:bg-white/20'
                                }`}
                            >
                                <span className="text-[10px] uppercase font-bold tracking-wider opacity-80">{day.weekday}</span>
                                <span className="text-lg font-bold leading-none mt-0.5">{day.date}</span>
                            </button>
                        ))}
                    </div>

                    {/* Main Content (Swipeable) */}
                    <div 
                        ref={scrollRef}
                        onScroll={handleScroll}
                        className="flex-1 overflow-x-auto overflow-y-hidden snap-container no-scrollbar flex relative"
                    >
                        {schedule.map((day, dayIdx) => (
                            <div key={day.id} className="min-w-full h-full snap-item overflow-y-auto p-4 pb-24 no-scrollbar">
                                
                                <div className="glass-card-dark rounded-2xl p-4 mb-4 flex justify-between items-center">
                                    <div>
                                        <h2 className="text-lg font-bold">{day.title}</h2>
                                        <p className="text-xs text-slate-300 mt-1">
                                            {day.activities.length} å€‹è¡Œç¨‹
                                        </p>
                                    </div>
                                    <button 
                                        onClick={() => setEditMode(!editMode)}
                                        className={`p-2 rounded-full transition-colors ${editMode ? 'bg-rose-500 text-white' : 'bg-white/10 text-white'}`}
                                    >
                                        {editMode ? <X size={18}/> : <Edit2 size={18}/>}
                                    </button>
                                </div>

                                <div className="space-y-3">
                                    {day.activities.map((act, actIdx) => (
                                        <div 
                                            key={act.id} 
                                            className="flex gap-3 relative group"
                                            onContextMenu={(e) => {e.preventDefault(); setEditMode(true);}}
                                        >
                                            {/* Time Column */}
                                            <div className="flex flex-col items-center pt-2 w-12 shrink-0">
                                                <span className="text-xs font-bold text-white/90 font-mono">{act.time}</span>
                                                <div className="h-full w-0.5 bg-white/20 my-1 rounded-full"></div>
                                            </div>

                                            {/* Card */}
                                            <div className={`flex-1 glass-card rounded-2xl p-3.5 transition-all relative ${editMode ? 'translate-x-2' : ''}`}>
                                                
                                                {/* Header */}
                                                <div className="flex justify-between items-start mb-2">
                                                    <div className="flex items-center gap-2">
                                                        <div className={`p-1.5 rounded-lg ${getTypeColor(act.type)}`}>
                                                            {getIcon(act.type)}
                                                        </div>
                                                        <h3 className="font-bold text-slate-800 leading-tight">{act.title}</h3>
                                                    </div>
                                                </div>

                                                {/* Note */}
                                                {act.note && <p className="text-xs text-slate-500 pl-8 mb-2 line-clamp-2">{act.note}</p>}

                                                {/* Footer Actions */}
                                                {!editMode && act.location && (
                                                    <div className="flex justify-end mt-1">
                                                        <button 
                                                            onClick={() => openGoogleMap(act.location)}
                                                            className="flex items-center gap-1 text-[10px] font-bold text-ocean-600 bg-ocean-50 px-2 py-1 rounded-full active:bg-ocean-100"
                                                        >
                                                            <Navigation size={10} /> GOOGLE MAP
                                                        </button>
                                                    </div>
                                                )}

                                                {/* Edit Overlay Controls */}
                                                {editMode && (
                                                    <div className="absolute inset-y-0 right-0 w-24 bg-gradient-to-l from-white via-white to-transparent pl-4 flex items-center justify-end gap-1 pr-2 rounded-r-2xl">
                                                        <div className="flex flex-col gap-1">
                                                            <button 
                                                                disabled={actIdx===0}
                                                                onClick={() => moveItem(dayIdx, actIdx, -1)}
                                                                className="p-1.5 bg-slate-100 text-slate-600 rounded-md disabled:opacity-30"
                                                            ><ArrowUp size={14}/></button>
                                                            <button 
                                                                disabled={actIdx===day.activities.length-1}
                                                                onClick={() => moveItem(dayIdx, actIdx, 1)}
                                                                className="p-1.5 bg-slate-100 text-slate-600 rounded-md disabled:opacity-30"
                                                            ><ArrowDown size={14}/></button>
                                                        </div>
                                                        <button 
                                                            onClick={() => setEditingItem({dayIdx, actIdx, data: {...act}})}
                                                            className="p-2 bg-ocean-100 text-ocean-600 rounded-full"
                                                        >
                                                            <Edit2 size={16}/>
                                                        </button>
                                                        <button 
                                                            onClick={() => deleteItem(dayIdx, actIdx)}
                                                            className="p-2 bg-rose-100 text-rose-500 rounded-full"
                                                        >
                                                            <Trash2 size={16}/>
                                                        </button>
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                    
                                    <div className="h-20"></div> {/* Bottom Spacer */}
                                </div>
                            </div>
                        ))}
                    </div>

                    {/* Floating Add Button */}
                    <button 
                        onClick={() => setEditingItem({dayIdx: activeDayIdx, actIdx: -1, data: {time:'12:00', title:'', type:'activity', location:''}})}
                        className="fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-ocean-500 to-ocean-400 text-white rounded-full shadow-xl flex items-center justify-center hover:scale-105 active:scale-95 transition-all z-20 border-4 border-white/20"
                    >
                        <Plus size={28} />
                    </button>

                    {/* Edit/Add Modal */}
                    {editingItem && (
                        <Modal isOpen={true} onClose={() => setEditingItem(null)}>
                            <div className="bg-ocean-500 p-4 text-white">
                                <h3 className="text-lg font-bold">{editingItem.actIdx === -1 ? 'æ–°å¢è¡Œç¨‹' : 'ç·¨è¼¯è¡Œç¨‹'}</h3>
                            </div>
                            <div className="p-6 space-y-4">
                                <div className="grid grid-cols-4 gap-4">
                                    <div className="col-span-1">
                                        <label className="text-xs font-bold text-gray-400">æ™‚é–“</label>
                                        <input 
                                            type="time" 
                                            value={editingItem.data.time}
                                            onChange={e => setEditingItem({...editingItem, data: {...editingItem.data, time: e.target.value}})}
                                            className="w-full mt-1 bg-gray-50 border border-gray-200 rounded-xl p-2 text-center font-bold text-lg"
                                        />
                                    </div>
                                    <div className="col-span-3">
                                        <label className="text-xs font-bold text-gray-400">åç¨±</label>
                                        <input 
                                            type="text" 
                                            value={editingItem.data.title}
                                            onChange={e => setEditingItem({...editingItem, data: {...editingItem.data, title: e.target.value}})}
                                            className="w-full mt-1 bg-gray-50 border border-gray-200 rounded-xl p-2.5 font-bold"
                                            placeholder="è¡Œç¨‹åç¨±"
                                        />
                                    </div>
                                </div>

                                <div>
                                    <label className="text-xs font-bold text-gray-400 mb-1 block">é¡å‹</label>
                                    <div className="flex gap-2 overflow-x-auto no-scrollbar pb-1">
                                        {['food','view','water','relax','boat','transport','hotel','activity'].map(type => (
                                            <button
                                                key={type}
                                                onClick={() => setEditingItem({...editingItem, data: {...editingItem.data, type}})}
                                                className={`p-2 rounded-lg border flex-shrink-0 ${editingItem.data.type === type ? 'bg-ocean-500 text-white border-ocean-500' : 'bg-white text-gray-400 border-gray-200'}`}
                                            >
                                                {React.cloneElement(getIcon(type), {size: 20})}
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                <div>
                                    <label className="text-xs font-bold text-gray-400">å‚™è¨»</label>
                                    <textarea 
                                        rows="2"
                                        value={editingItem.data.note || ''}
                                        onChange={e => setEditingItem({...editingItem, data: {...editingItem.data, note: e.target.value}})}
                                        className="w-full mt-1 bg-gray-50 border border-gray-200 rounded-xl p-3 text-sm"
                                        placeholder="è©³ç´°è³‡è¨Š..."
                                    ></textarea>
                                </div>

                                <div>
                                    <label className="text-xs font-bold text-gray-400">åœ°é» (Google Map é—œéµå­—)</label>
                                    <div className="relative">
                                        <MapPin size={16} className="absolute left-3 top-3 text-gray-400"/>
                                        <input 
                                            type="text" 
                                            value={editingItem.data.location || ''}
                                            onChange={e => setEditingItem({...editingItem, data: {...editingItem.data, location: e.target.value}})}
                                            className="w-full mt-1 pl-9 bg-gray-50 border border-gray-200 rounded-xl p-2.5 text-sm"
                                            placeholder="ä¾‹å¦‚: Kayangan Lake"
                                        />
                                    </div>
                                </div>

                                <button 
                                    onClick={() => saveItemEdit(editingItem.data)}
                                    className="w-full py-3 mt-2 bg-ocean-500 hover:bg-ocean-600 text-white rounded-xl font-bold shadow-lg shadow-ocean-200/50 active:scale-95 transition-transform"
                                >
                                    å„²å­˜
                                </button>
                            </div>
                        </Modal>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼æ¥­ç®—åŠ›æ±ºç­–å„€è¡¨æ¿ï¼šTPU vs GPU</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f3f4f6; }
        .gradient-gpu { background: linear-gradient(135deg, #76b900 0%, #1a4d00 100%); }
        .gradient-tpu { background: linear-gradient(135deg, #4285F4 0%, #0d47a1 100%); }
        .card-hover:hover { transform: translateY(-5px); transition: all 0.3s ease; }
        
        /* Custom Scrollbar for sleek look */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        /* Animation classes */
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Navbar -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-gray-800">âš¡ ç®—åŠ›æ±ºç­–ä¸­å¿ƒ</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button onclick="switchTab('wizard')" id="tab-wizard" class="px-3 py-2 rounded-md text-sm font-medium bg-blue-100 text-blue-700">æ±ºç­–åš®å°</button>
                    <button onclick="switchTab('comparison')" id="tab-comparison" class="px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900">è©³ç´°å°æ¯” & æ¨¡æ“¬</button>
                    <button onclick="switchTab('education')" id="tab-education" class="px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900">åŸç†åœ–è§£</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- TAB 1: Decision Wizard -->
        <div id="content-wizard" class="block space-y-8">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-900">æˆ‘è©²é¸å“ªä¸€å€‹ï¼Ÿ</h2>
                <p class="mt-2 text-lg text-gray-600">å›ç­”ä»¥ä¸‹ä¸‰å€‹é—œæ–¼æ‚¨å°ˆæ¡ˆçš„å•é¡Œï¼Œç³»çµ±å°‡ç‚ºæ‚¨æ¨è–¦æœ€ä½³æ–¹æ¡ˆã€‚</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Question Form -->
                <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">1. æ‚¨çš„ä¸»è¦ä»»å‹™é¡å‹æ˜¯ï¼Ÿ</label>
                            <select id="q1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                                <option value="graphics">åœ–å½¢æ¸²æŸ“ / 3D éŠæˆ²é–‹ç™¼ / å½±ç‰‡å‰ªè¼¯</option>
                                <option value="general_ai">é€šç”¨ AI é–‹ç™¼ (å°æ¨¡å‹ã€å¤šç¨®æ¶æ§‹å˜—è©¦)</option>
                                <option value="massive_ai">è¶…å¤§è¦æ¨¡ AI è¨“ç·´ (å¦‚ LLM, æ¨è–¦ç³»çµ±)</option>
                                <option value="scientific">å‚³çµ±ç§‘å­¸è¨ˆç®— (æµé«”åŠ›å­¸, åˆ†å­æ¨¡æ“¬)</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">2. æ‚¨ä½¿ç”¨çš„é–‹ç™¼æ¡†æ¶æˆ–ç”Ÿæ…‹ç³»ï¼Ÿ</label>
                            <select id="q2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                                <option value="cuda">é«˜åº¦ä¾è³´ CUDA / C++ è‡ªå®šç¾©ç®—å­</option>
                                <option value="pytorch">PyTorch (æ¨™æº–ç‰ˆ)</option>
                                <option value="tensorflow">TensorFlow / JAX / PyTorch XLA</option>
                                <option value="graphic_eng">Unreal Engine / Unity / Blender</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">3. å°ˆæ¡ˆçš„é‹ç®—è¦æ¨¡èˆ‡é ç®—æ•æ„Ÿåº¦ï¼Ÿ</label>
                            <select id="q3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white">
                                <option value="small">å°è¦æ¨¡ / å¿«é€ŸåŸå‹é–‹ç™¼ (ä¸åœ¨ä¹é›»è²»)</option>
                                <option value="medium">ä¸­ç­‰è¦æ¨¡ / éœ€è¦éˆæ´»èª¿è©¦</option>
                                <option value="huge">æ¥µå¤§è¦æ¨¡ / æ¥µåº¦åœ¨ä¹é›»è²»èˆ‡è¨“ç·´æ™‚é–“ (æˆæœ¬æ•æ„Ÿ)</option>
                            </select>
                        </div>

                        <button id="analyze-btn" onclick="calculateRecommendation()" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-bold hover:bg-indigo-700 transition flex justify-center items-center">
                            <span>åˆ†æä¸¦å–å¾—å»ºè­°</span>
                        </button>
                    </div>
                </div>

                <!-- Result Display Area -->
                <div class="relative">
                    <!-- Result Display -->
                    <div id="result-card" class="bg-gray-50 p-6 rounded-xl shadow-inner border border-gray-200 flex flex-col justify-center items-center text-center hidden h-full min-h-[300px]">
                        <!-- Dynamic Content will be injected here -->
                    </div>
                    
                    <!-- Placeholder for result -->
                    <div id="result-placeholder" class="bg-white p-6 rounded-xl shadow border border-gray-200 flex flex-col justify-center items-center text-center opacity-50 h-full min-h-[300px]">
                        <div class="text-6xl mb-4">ğŸ¤–</div>
                        <h3 class="text-xl font-bold">ç­‰å¾…åˆ†æ...</h3>
                        <p>è«‹å·¦å´é¸æ“‡æ¢ä»¶å¾Œé»æ“ŠæŒ‰éˆ•</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 2: Comparison & Simulation -->
        <div id="content-comparison" class="hidden space-y-8">
            
            <!-- Scale Simulator -->
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h3 class="text-2xl font-bold mb-4 text-gray-800">ğŸ“ˆ æˆæœ¬æ•ˆç›Šæ¨¡æ“¬å™¨</h3>
                <p class="text-gray-600 mb-6">æ‹–å‹•æ»‘æ¡¿ï¼Œè§€å¯Ÿéš¨è‘—ã€Œæ¨¡å‹åƒæ•¸é‡ï¼ˆçŸ©é™£è¦æ¨¡ï¼‰ã€è®Šå¤§ï¼ŒGPU èˆ‡ TPU çš„æ•ˆèƒ½èˆ‡æˆæœ¬è®ŠåŒ–ã€‚</p>
                
                <div class="flex items-center space-x-4 mb-6">
                    <span class="text-sm font-bold text-gray-500">å°å‹å°ˆæ¡ˆ</span>
                    <input type="range" min="1" max="100" value="50" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" id="scaleSlider" oninput="updateChart(this.value)">
                    <span class="text-sm font-bold text-red-500">è¶…å¤§å‹å°ˆæ¡ˆ (LLM)</span>
                </div>

                <div class="h-64 w-full">
                    <canvas id="efficiencyChart"></canvas>
                </div>
                <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                    <div class="p-3 bg-green-50 rounded border border-green-200">
                        <h4 class="font-bold text-green-800">GPU ç‹€æ…‹</h4>
                        <p id="gpu-status-text" class="text-sm text-green-700">è™•ç†ä¸­...</p>
                    </div>
                    <div class="p-3 bg-blue-50 rounded border border-blue-200">
                        <h4 class="font-bold text-blue-800">TPU ç‹€æ…‹</h4>
                        <p id="tpu-status-text" class="text-sm text-blue-700">è™•ç†ä¸­...</p>
                    </div>
                </div>
            </div>

            <!-- Comparison Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- GPU Card -->
                <div class="bg-white rounded-xl shadow overflow-hidden card-hover">
                    <div class="p-4 gradient-gpu">
                        <h3 class="text-white text-xl font-bold flex items-center">
                            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"></path></svg>
                            GPU (é€šç”¨æˆ°å£«)
                        </h3>
                    </div>
                    <div class="p-6">
                        <ul class="space-y-3 text-sm">
                            <li class="flex items-start"><span class="text-green-600 mr-2">âœ”</span> <b>éˆæ´»åº¦æ¥µé«˜</b>ï¼šæ”¯æ´ CUDAï¼Œå¹¾ä¹æ‰€æœ‰ AI æ¡†æ¶èˆ‡ç§‘å­¸è¨ˆç®—çš†é€šã€‚</li>
                            <li class="flex items-start"><span class="text-green-600 mr-2">âœ”</span> <b>åœ–å½¢è™•ç†</b>ï¼šå”¯ä¸€é¸æ“‡ï¼Œç”¨æ–¼æ¸²æŸ“ã€éŠæˆ²ã€å½±åƒè§£ç¢¼ã€‚</li>
                            <li class="flex items-start"><span class="text-green-600 mr-2">âœ”</span> <b>å°æ‰¹é‡å„ªå‹¢</b>ï¼šå¦‚æœ batch size å°ï¼ŒGPU åæ‡‰æ›´å¿«ã€‚</li>
                            <li class="flex items-start"><span class="text-red-500 mr-2">âœ˜</span> <b>è¨˜æ†¶é«”ç“¶é ¸</b>ï¼šåœ¨å¤§è¦æ¨¡çŸ©é™£é‹ç®—æ™‚ï¼Œé »å¯¬é™åˆ¶è¼ƒå¤§ã€‚</li>
                        </ul>
                    </div>
                </div>

                <!-- TPU Card -->
                <div class="bg-white rounded-xl shadow overflow-hidden card-hover">
                    <div class="p-4 gradient-tpu">
                        <h3 class="text-white text-xl font-bold flex items-center">
                            <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                            TPU (çŸ©é™£å°ˆå®¶)
                        </h3>
                    </div>
                    <div class="p-6">
                        <ul class="space-y-3 text-sm">
                            <li class="flex items-start"><span class="text-blue-600 mr-2">âœ”</span> <b>ååé‡æ€ªç‰©</b>ï¼šä½¿ç”¨è„ˆå‹•é™£åˆ—ï¼Œè™•ç†è¶…å¤§çŸ©é™£ä¹˜æ³•é€Ÿåº¦æ¥µå¿«ã€‚</li>
                            <li class="flex items-start"><span class="text-blue-600 mr-2">âœ”</span> <b>èƒ½æ•ˆæ¯”ä¹‹ç‹</b>ï¼šæ¯ç“¦ç‰¹é›»åŠ›èƒ½ç®—æ›´å¤šæ¬¡ï¼Œé©åˆ 24 å°æ™‚ä¸åœæ©Ÿè¨“ç·´ã€‚</li>
                            <li class="flex items-start"><span class="text-blue-600 mr-2">âœ”</span> <b>ç·šæ€§æ“´å±•</b>ï¼šå¤šé¡† TPU ä¸²è¯ (TPU Pod) æ•ˆç‡è€—ææ¥µä½ã€‚</li>
                            <li class="flex items-start"><span class="text-red-500 mr-2">âœ˜</span> <b>ç”Ÿæ…‹ç³»é™åˆ¶</b>ï¼šé«˜åº¦ç¶å®š TensorFlow/JAX (é›– PyTorch æ”¯æ´åº¦è®Šå¥½ï¼Œä½†ä»ä¸å¦‚ GPU)ã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 3: Education -->
        <div id="content-education" class="hidden space-y-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Concept 1: Matrix Operations -->
                <div class="bg-white p-6 rounded-xl shadow border-l-4 border-blue-500">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ä»€éº¼æ˜¯çŸ©é™£é‹ç®—ï¼Ÿ (Matrix Ops)</h3>
                    <div class="bg-gray-100 p-4 rounded mb-4 text-center">
                        <div class="text-4xl mb-2">ğŸ”¢ âœ–ï¸ ğŸ”¢</div>
                        <p class="text-xs text-gray-500">AI çš„æœ¬è³ªå°±æ˜¯å…©å€‹å·¨å¤§çš„æ•¸å­—è¡¨ç›¸ä¹˜</p>
                    </div>
                    <p class="text-gray-600 mb-4">
                        è©¦æƒ³ä½ è¦ç®— 100 è¬å€‹å­¸ç”Ÿçš„åŠ æ¬Šå¹³å‡åˆ†æ•¸ã€‚
                        <br><br>
                        <b>GPU (åˆ‡èœå·¥)</b>ï¼šå« 1000 å€‹äººé€²ä¾†ï¼Œæ¯äººç®— 1000 å€‹å­¸ç”Ÿçš„åˆ†æ•¸ã€‚ç®—å®Œè¦å›å ±ï¼ˆå­˜å–è¨˜æ†¶é«”ï¼‰ï¼Œå†é ˜ä¸‹ä¸€æ‰¹ä»»å‹™ã€‚äººå¤šæ‰‹é›œï¼Œç®¡ç†æˆæœ¬é«˜ã€‚
                        <br><br>
                        <b>TPU (æµæ°´ç·š)</b>ï¼šå»ºç«‹ä¸€æ¢å°ˆé–€çš„è¼¸é€å¸¶ã€‚å­¸ç”Ÿçš„åˆ†æ•¸å¾ä¸€é ­æ”¾é€²å»ï¼Œç¶“éä¸­é–“çš„æ©Ÿå™¨ç›´æ¥ç®—å‡ºçµæœå¾å¦ä¸€é ­å‡ºä¾†ã€‚<b>æ•¸æ“šåœ¨æ™¶ç‰‡å…§éƒ¨æµå‹•ï¼Œä¸éœ€è¦ä¸€ç›´è·‘å»å€‰åº«ï¼ˆè¨˜æ†¶é«”ï¼‰</b>ã€‚é€™å°±æ˜¯ã€Œè„ˆå‹•é™£åˆ—ã€ã€‚
                    </p>
                </div>

                <!-- Concept 2: Power Efficiency -->
                <div class="bg-white p-6 rounded-xl shadow border-l-4 border-green-500">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">ä»€éº¼æ˜¯èƒ½æ•ˆæ¯”ï¼Ÿ (Energy Efficiency)</h3>
                    <div class="bg-gray-100 p-4 rounded mb-4 text-center">
                        <div class="text-4xl mb-2">âš¡ ğŸ’°</div>
                        <p class="text-xs text-gray-500">æ¯èŠ± 1 å¡ŠéŒ¢é›»è²»ï¼Œèƒ½åšå¤šå°‘äº‹ï¼Ÿ</p>
                    </div>
                    <p class="text-gray-600 mb-4">
                        å°æ–¼ä¼æ¥­ä¾†èªªï¼Œé€™ç›´æ¥ç­‰æ–¼<b>ç‡Ÿé‹æˆæœ¬ (OpEx)</b>ã€‚
                        <br><br>
                        ç•¶è¨“ç·´ä¸€å€‹åƒæ˜¯ ChatGPT çš„æ¨¡å‹éœ€è¦æ•¸å€‹æœˆæ™‚ï¼ŒGPU å› ç‚ºé »ç¹è®€å¯«è¨˜æ†¶é«”ï¼ˆé€™å‹•ä½œå¾ˆè€—é›»ä¸”ç”¢ç”Ÿå»¢ç†±ï¼‰ï¼Œé›»è²»å¯èƒ½é«˜é”æ•¸ç™¾è¬ç¾å…ƒã€‚
                        <br><br>
                        TPU å› ç‚ºæ¸›å°‘äº†è¨˜æ†¶é«”å­˜å–æ¬¡æ•¸ï¼ˆæ•¸æ“šå¾©ç”¨ï¼‰ï¼Œå®ƒå¯ä»¥ç”¨æ›´å°‘çš„é›»ï¼Œå®ŒæˆåŒæ¨£çš„è¨ˆç®—é‡ã€‚é€™å°±æ˜¯é«˜èƒ½æ•ˆæ¯”ã€‚
                    </p>
                </div>
            </div>

            <!-- Analogy Visual -->
            <div class="bg-indigo-900 rounded-xl p-8 text-white text-center">
                <h3 class="text-2xl font-bold mb-4">ä¸€å¥è©±ç¸½çµ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                    <div>
                        <div class="text-6xl mb-4">âš”ï¸</div>
                        <h4 class="text-xl font-bold text-green-400">GPU = ç‰¹ç¨®éƒ¨éšŠ</h4>
                        <p class="mt-2 text-indigo-200">ä»€éº¼æ­¦å™¨éƒ½æœƒç”¨ï¼Œåæ‡‰å¿«ï¼Œé©æ‡‰åŠ›å¼·ï¼Œèƒ½æ‰“æ¸¸æ“Šæˆ°ã€‚</p>
                        <p class="mt-1 text-sm text-gray-400">é©åˆï¼šå¤šè®Šçš„ä»»å‹™ã€é–‹ç™¼éšæ®µ</p>
                    </div>
                    <div>
                        <div class="text-6xl mb-4">ğŸ­</div>
                        <h4 class="text-xl font-bold text-blue-400">TPU = è‡ªå‹•åŒ–è¶…ç´šå·¥å» </h4>
                        <p class="mt-2 text-indigo-200">åªèƒ½ç”Ÿç”¢ç‰¹å®šç”¢å“ï¼Œä½†ç”¢èƒ½æ˜¯æ‰‹å·¥æ¥­çš„ä¸€è¬å€ã€‚</p>
                        <p class="mt-1 text-sm text-gray-400">é©åˆï¼šå¤§è¦æ¨¡é‡ç”¢ã€æ¨¡å‹è¨“ç·´</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Script for Logic -->
    <script>
        // Tab Switching Logic
        function switchTab(tabId) {
            // Hide all content
            ['wizard', 'comparison', 'education'].forEach(id => {
                document.getElementById('content-' + id).classList.add('hidden');
                document.getElementById('tab-' + id).classList.remove('bg-blue-100', 'text-blue-700');
                document.getElementById('tab-' + id).classList.add('text-gray-600');
            });

            // Show selected
            document.getElementById('content-' + tabId).classList.remove('hidden');
            document.getElementById('tab-' + tabId).classList.add('bg-blue-100', 'text-blue-700');
            document.getElementById('tab-' + tabId).classList.remove('text-gray-600');
        }

        // Decision Wizard Logic
        function calculateRecommendation() {
            // UI Feedback: Button Loading State
            const btn = document.getElementById('analyze-btn');
            const originalBtnText = btn.innerHTML;
            btn.innerHTML = `<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> åˆ†æä¸­...`;
            btn.disabled = true;

            // Fade out existing result if visible
            const resCard = document.getElementById('result-card');
            const placeholder = document.getElementById('result-placeholder');
            resCard.classList.add('opacity-0'); 
            
            // Simulate processing delay (500ms) for better UX
            setTimeout(() => {
                const task = document.getElementById('q1').value;
                const framework = document.getElementById('q2').value;
                const scale = document.getElementById('q3').value;
                
                let resultType = '';
                let title = '';
                let desc = '';
                let colorClass = '';
                let icon = '';

                // Logic Tree
                if (task === 'graphics' || framework === 'graphic_eng') {
                    resultType = 'GPU';
                    title = 'æ¨è–¦ä½¿ç”¨ GPU';
                    desc = 'TPU ç„¡æ³•è™•ç†åœ–å½¢æ¸²æŸ“ã€å…‰ç·šè¿½è¹¤æˆ– 3D å»ºæ¨¡ä»»å‹™ã€‚é€™æ˜¯ GPU çš„çµ•å°é ˜åŸŸã€‚';
                    colorClass = 'bg-green-100 border-green-500 text-green-800';
                    icon = 'ğŸ®';
                } else if (framework === 'cuda') {
                    resultType = 'GPU';
                    title = 'æ¨è–¦ä½¿ç”¨ GPU';
                    desc = 'æ‚¨çš„ç¨‹å¼ç¢¼é«˜åº¦ä¾è³´ CUDA ç”Ÿæ…‹ç³»æˆ– C++ è‡ªå®šç¾©ç®—å­ï¼Œç§»æ¤åˆ° TPU (éœ€æ”¹å¯«ç‚º XLA) çš„æˆæœ¬éé«˜ã€‚';
                    colorClass = 'bg-green-100 border-green-500 text-green-800';
                    icon = 'âš™ï¸';
                } else if (task === 'scientific' && framework !== 'tensorflow' && framework !== 'jax') {
                    resultType = 'GPU';
                    title = 'æ¨è–¦ä½¿ç”¨ GPU';
                    desc = 'å‚³çµ±ç§‘å­¸è¨ˆç®—åº«å° GPU çš„æ”¯æ´é å¥½æ–¼ TPUã€‚';
                    colorClass = 'bg-green-100 border-green-500 text-green-800';
                    icon = 'ğŸ§ª';
                } else if (scale === 'huge' && (framework === 'tensorflow' || framework === 'jax' || framework === 'pytorch')) {
                    resultType = 'TPU';
                    title = 'å¼·çƒˆæ¨è–¦ä½¿ç”¨ TPU';
                    desc = 'åœ¨æ¥µå¤§è¦æ¨¡è¨“ç·´ä¸‹ï¼ŒTPU çš„ã€Œç·šæ€§æ“´å±•èƒ½åŠ›ã€èˆ‡ã€Œèƒ½æ•ˆæ¯”ã€å°‡ç‚ºå…¬å¸ç¯€çœå¤§é‡æ™‚é–“èˆ‡æ•¸ç™¾è¬çš„é›»åŠ›æˆæœ¬ã€‚Google é›²ç«¯ç”Ÿæ…‹ç³»å°æ­¤æ”¯æ´æœ€ä½³ã€‚';
                    colorClass = 'bg-blue-100 border-blue-500 text-blue-800';
                    icon = 'ğŸ­';
                } else if (scale === 'medium' && (framework === 'tensorflow' || framework === 'jax')) {
                    resultType = 'TPU';
                    title = 'å»ºè­°å˜—è©¦ TPU';
                    desc = 'æ—¢ç„¶æ‚¨ä½¿ç”¨ JAX/TensorFlowï¼ŒTPU èƒ½æä¾›æ¥µä½³çš„æ€§åƒ¹æ¯”ã€‚';
                    colorClass = 'bg-blue-50 border-blue-400 text-blue-700';
                    icon = 'ğŸš€';
                } else {
                    // Default fallback
                    resultType = 'GPU';
                    title = 'å»ºè­°ä½¿ç”¨ GPU';
                    desc = 'GPU çš„é€šç”¨æ€§æœ€é«˜ï¼Œç”Ÿæ…‹ç³»æœ€å®Œæ•´ã€‚å°æ–¼åŸå‹é–‹ç™¼ã€é™¤éŒ¯æˆ–ä¸­å°è¦æ¨¡ä»»å‹™ï¼ŒGPU æ˜¯æœ€å®‰å…¨çš„é¸æ“‡ï¼Œç§Ÿç”¨ä¹Ÿæœ€æ–¹ä¾¿ï¼ˆAWS, GCP, Azure éƒ½æœ‰ï¼‰ã€‚';
                    colorClass = 'bg-green-50 border-green-400 text-green-700';
                    icon = 'ğŸ›¡ï¸';
                }

                // Render Result
                const resultHTML = `
                    <div class="${colorClass} p-8 rounded-full w-24 h-24 flex items-center justify-center text-4xl mb-4 shadow-sm mx-auto fade-in">
                        ${icon}
                    </div>
                    <div class="fade-in">
                        <h3 class="text-2xl font-bold mb-2 ${resultType === 'GPU' ? 'text-green-800' : 'text-blue-800'}">${title}</h3>
                        <p class="text-gray-700 max-w-md mx-auto">${desc}</p>
                        <div class="mt-6 text-sm text-gray-500 bg-white bg-opacity-50 p-3 rounded">
                            æ ¸å¿ƒè€ƒé‡ï¼š${resultType === 'GPU' ? 'éˆæ´»æ€§ã€åœ–å½¢æ”¯æ´ã€CUDA ç”Ÿæ…‹' : 'çŸ©é™£é‹ç®—æ•ˆç‡ã€èƒ½æ•ˆæ¯”ã€æ“´å±•æ€§'}
                        </div>
                    </div>
                `;

                // Update DOM
                placeholder.classList.add('hidden');
                resCard.classList.remove('hidden');
                resCard.innerHTML = resultHTML;
                resCard.className = `p-8 rounded-xl shadow-lg border-2 flex flex-col justify-center items-center text-center transition-all duration-300 h-full min-h-[300px] ${resultType === 'GPU' ? 'bg-green-50 border-green-200' : 'bg-blue-50 border-blue-200'}`;
                
                // Trigger Fade In
                // Removing opacity-0 class to fade in if it was already there, 
                // but we also rely on inner content animation.
                setTimeout(() => resCard.classList.remove('opacity-0'), 10);

                // Reset Button
                btn.innerHTML = originalBtnText;
                btn.disabled = false;

            }, 500); // 500ms delay simulates calculation
        }

        // Chart Logic
        let myChart = null;

        function initChart() {
            const ctx = document.getElementById('efficiencyChart').getContext('2d');
            myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['å°æ¨¡å‹', 'ä¸­æ¨¡å‹', 'å¤§æ¨¡å‹', 'è¶…å¤§æ¨¡å‹'],
                    datasets: [{
                        label: 'GPU å–®ä½é‹ç®—æˆæœ¬ ($)',
                        data: [10, 25, 60, 100], // Linear increase
                        borderColor: '#76b900',
                        backgroundColor: '#76b900',
                        tension: 0.4
                    }, {
                        label: 'TPU å–®ä½é‹ç®—æˆæœ¬ ($)',
                        data: [20, 30, 45, 55], // High startup cost, but efficient at scale
                        borderColor: '#4285F4',
                        backgroundColor: '#4285F4',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'ç›¸å°æˆæœ¬ (è¶Šä½è¶Šå¥½)' }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.raw;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateChart(val) {
            // Simulate changing efficiency based on scale
            // Val 1-100
            
            const numericVal = parseInt(val);
            const gpuCost = 10 + (numericVal * 1.2); // GPU costs rise linearly with complexity
            const tpuCost = 30 + (numericVal * 0.4); // TPU has higher base cost but scales better

            // Text update
            const gpuText = document.getElementById('gpu-status-text');
            const tpuText = document.getElementById('tpu-status-text');

            if (numericVal < 30) {
                gpuText.innerText = "é«˜æ•ˆç‡å€é–“ï¼šéˆæ´»ä¸”å¿«é€Ÿ";
                tpuText.innerText = "ä½æ•ˆç‡å€é–“ï¼šå•Ÿå‹•é–‹éŠ·éå¤§";
                gpuText.parentElement.classList.add('ring-2', 'ring-green-400');
                tpuText.parentElement.classList.remove('ring-2', 'ring-blue-400');
            } else if (numericVal > 70) {
                gpuText.innerText = "æˆæœ¬æ¿€å¢ï¼šè¨˜æ†¶é«”é »å¯¬ç“¶é ¸";
                tpuText.innerText = "é»ƒé‡‘å€é–“ï¼šç™¼æ®è„ˆå‹•é™£åˆ—å„ªå‹¢";
                gpuText.parentElement.classList.remove('ring-2', 'ring-green-400');
                tpuText.parentElement.classList.add('ring-2', 'ring-blue-400');
            } else {
                gpuText.innerText = "ä¸€èˆ¬å€é–“";
                tpuText.innerText = "ä¸€èˆ¬å€é–“";
                gpuText.parentElement.classList.remove('ring-2', 'ring-green-400');
                tpuText.parentElement.classList.remove('ring-2', 'ring-blue-400');
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initChart();
        });

    </script>
</body>
</html>


